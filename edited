#importing modules
import pygame as p
import math as m
import random as r

#intializing pygame
p.init()

#game window
screen=p.display.set_mode((1600,900))

#title and icon
p.display.set_caption("SPACE INVADERS")
icon=p.image.load("space-game.png")
p.display.set_icon(icon)

#background
bg=p.image.load("space.jpg")
def background():
    screen.blit(
        bg,(0,0))

#player
hero=p.image.load("spaceship.png")
p_xcoord=550
p_ycoord=800
p_xchange=0
def player(x,y):
    screen.blit(hero,(x,y))

#enemy
villain=p.image.load("invaders.png")
v_xcoord=r.randint(0,1200)
v_ycoord=r.randint(100,300)
v_xchange=2
v_ychange=60
def enemy(x,y):
    screen.blit(villain,(x,y))

#bullet
bullet=p.image.load("bullet.png")
bulletx=0
bullety=540
bulletx_change=0
bullety_change=8
bullet_state='ready' 

def fireBullet(x,y):
   global bullet_state
   bullet_state='fire'
   screen.blit(bullet,(x+48,y+40))
 
    
    
#gameloop
run=True
while run:
    background()
    for event in p.event.get():
        if event.type == p.QUIT:
            run==False

    #players movement 
        if event.type == p.KEYDOWN:
            if event.key == p.K_LEFT:
                p_xchange = -3
            if event.key == p.K_RIGHT:
                p_xchange = 3
            if event.key==p.K_SPACE:
              if bullet_state=='ready':
                  bullety=p_ycoord 
                  bulletx=p_xcoord
                  fireBullet(bulletx,bullety)
                    
                     
        if event.type == p.KEYUP:
            if event.key == p.K_LEFT or event.key == p.K_RIGHT:
                p_xchange = 0
    p_xcoord += p_xchange         


   
    
    #adding borders to ensure spaceship stays inside window
    if p_xcoord <=0:
        p_xcoord = 0
    elif p_xcoord >= 1072:
        p_xcoord = 1072
        
    #enemy movement
    v_xcoord += v_xchange
    
    if v_xcoord <=0:
        v_xchange = 2
        v_ycoord += v_ychange 
    elif v_xcoord >= 1072:
        v_xchange = -2
        v_ycoord += v_ychange

    #bullet movement
    if bullety<=0:
       bullety=540
       bullet_state='ready'
    if bullet_state == 'fire':        
       fireBullet(bulletx,bullety)
       bullety-=bullety_change   
     
    player(p_xcoord,p_ycoord)
    enemy(v_xcoord,v_ycoord)
    p.display.update()
quit()
